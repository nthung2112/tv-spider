var S="Mozilla/5.0 (iPhone; CPU iPhone OS 13_2_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.3 Mobile/15E148 Safari/604.1";async function u(t,e){return(await req(t,{method:"get",headers:{"User-Agent":S,...e}})).content}function b(t){if(Array.isArray(t))return!0;if(typeof t!="object"||!Object.prototype.hasOwnProperty.call(t,"length")||typeof t.length!="number"||t.length<0)return!1;for(let e=0;e<t.length;e++)if(!(e in t))return!1;return!0}function v(t,e){let a=[];for(let n=0;n<t.length;n++)a.push(e(t[n],n));return a}function y(t,e){return b(t)?v(t,e):Object.keys(t).map(a=>e(t[a],a))}function f(t){return t==null||typeof t=="object"&&Object.keys(t).length===0||typeof t=="string"&&t.trim().length===0}function h(t,e){return t.reduce((a,n)=>{let r=typeof e=="string"?x(n,e):e(n),o=a[r]||[];return o.push(n),{...a,[r]:o}},{})}function x(t,e,a){let n=e.split(/[.[\]]/).filter(Boolean).reduce((r,o)=>r?.[o],t);return n!==void 0?n:a}function d(t){return new Date(t).toLocaleString("vi-VN",{hour:"numeric",minute:"numeric",day:"2-digit",month:"2-digit"})}var g="https://q.thapcamn.xyz",M="",w=0;async function O(t){M=t.skey,w=t.stype}async function $(t){let e=JSON.parse(await u(`${g}/api/match/featured/mt`)).data,a=JSON.parse(await u(`${g}/api/match/featured`)).data,n={},r=h(e,i=>a.some(l=>l.id===i.id)?"featured":i.match_status),o={featured:"N\u1ED5i b\u1EADt",live:"\u0110ang di\u1EC5n ra",pending:"S\u1EAFp di\u1EC5n ra"},c={featured:0,live:1,pending:2},s=Object.entries(r).map(([i,l])=>{let _=h(l.sort((m,T)=>T.tournament.priority-m.tournament.priority),"tournament.name"),p={key:"tag",name:"Type",init:"",value:Object.entries(_).map(([m])=>({n:m,v:m}))};return p.value.length>0&&(p.init=p.value[0].v,n[i]=[p]),{id:i,name:o[i]||"Kh\xF4ng x\xE1c \u0111\u1ECBnh"}}).sort((i,l)=>c[i.id]-c[l.id]);return JSON.stringify({class:[{id:"xemlai",name:"Xem l\u1EA1i"}].concat(s),filters:n})}async function L(){let e=JSON.parse(await u(g+"/api/match/featured")).data.sort((a,n)=>n.tournament.priority-a.tournament.priority).map(a=>({vod_id:a.id,vod_name:a.name,vod_pic:a.tournament.logo,vod_remarks:d(a.timestamp)}));return JSON.stringify({list:e})}async function R(t,e,a,n){let r=[];if(t==="xemlai"){let s=JSON.parse(await u(`${g}/api/news/thapcam/list/xemlai/${e}`)).data,i=s.list.map(l=>({vod_id:`${l.id}_${t}`,vod_name:l.name,vod_pic:l.feature_image,vod_remarks:d(l.updated_at)}));return JSON.stringify({page:s.page,pagecount:Math.round(s.total/s.limit),limit:s.limit,total:s.total,list:i})}t==="featured"?r=JSON.parse(await u(g+"/api/match/featured")).data:(r=JSON.parse(await u(g+"/api/match/featured/mt")).data,t&&(r=r.filter(s=>s.match_status===t))),n.tag&&(r=r.filter(s=>s.tournament.name===n.tag));let o=r.length,c=r.sort((s,i)=>i.tournament.priority-s.tournament.priority).map(s=>({vod_id:`${s.id}_${t}`,vod_name:s.name,vod_pic:s.tournament.logo,vod_remarks:d(s.timestamp)}));return JSON.stringify({page:1,pagecount:1,limit:o,total:o,list:c})}async function N(t){let[e,a]=t.split("_");if(a==="xemlai"){let i=JSON.parse(await u(`${g}/api/news/thapcam/detail/${e}`)).data;return JSON.stringify({list:[{vod_id:e,vod_pic:i.feature_image,vod_name:i.name,vod_play_from:"ThapCamTV",vod_play_url:`Full$${i.video_url}`,vod_remarks:d(i.updated_at),vod_content:i.content}]})}let n=JSON.parse(await u(`${g}/api/match/${e}`)).data,r=JSON.parse(await u(`${g}/api/match/${e}/meta`)).data,o=n.away?`${n.scores.away} ${n.away.name}`:"",c=o?`${n.home.name} ${n.scores.home}`:`${n.home.name}`,s={vod_id:e,vod_pic:n.tournament.logo,vod_name:[c,o].filter(Boolean).join(" - "),vod_play_from:f(r.play_urls)?"":"ThapCamTV",vod_play_url:f(r.play_urls)?"":r.play_urls.map(i=>`${i.name}$${i.url}`).join("#"),vod_remarks:n.tournament.name,vod_actor:r.commentators?r.commentators.map(i=>i.name).join(" vs "):"",vod_content:n.name};return JSON.stringify({list:[s]})}async function P(t,e,a){return JSON.stringify({parse:0,url:e})}async function C(t,e,a){let r=JSON.parse(await u(g+"/api/match/featured/mt")).data.filter(c=>c.name.toLowerCase().includes(t.toLowerCase())),o=y(r,c=>({vod_id:c.id,vod_name:c.name,vod_pic:c.tournament.logo,vod_remarks:c.date}));return JSON.stringify({list:o})}function B(){return{init:O,home:$,homeVod:L,category:R,detail:N,play:P,search:C}}export{B as __jsEvalReturn};
